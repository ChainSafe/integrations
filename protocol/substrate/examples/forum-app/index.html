<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <meta name="referrer" content="origin"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <title>Y forum</title>
        <script src="index.ts"></script>
    </head>
    <body>
    <script>
        function signSomething(){
            console.log("here!..");
        }
    </script>
    <script type=module>
        import init,{startup} from "./pkg/forum_app.js"
        import "./signer.js";

        await init().catch(console.err);
        await startup().catch(console.err);

        function signSomething(){
            console.log("window.signer: ", window.signer);
            console.log("signer provider:", window.SignerProvider);
            let signer = new SignerProvider();
            let payload = "6d65737361676520746f207369676e";
            (async () => {
                let signature = await signer.sign_payload(payload);
                console.log("signature: ", signature);
            })();
        }
        window.signSomething = signSomething;
    </script>
    <button onclick="signSomething()">Sign Something</button>
    </body>
</html>
